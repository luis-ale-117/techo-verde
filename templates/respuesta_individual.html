<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="icon" type="image/png" href="{{url_for('static', filename='img/arbol.png')}}" />
    <!--Bootstrap CSS-->
    <link rel="stylesheet" href="{{url_for('static', filename='styles/bootstrap.min.css')}}" />
    <!--Bootstrap JS-->
    <script src="{{url_for('static', filename='scripts/bootstrap.min.js')}}"></script>
    <!--Estilos propios-->
    <link rel="stylesheet" href="{{url_for('static', filename='styles/map.css')}}" />
    <link rel="stylesheet" href="{{url_for('static', filename='styles/styles.css')}}" />
    <title>Resgistro techos verdes</title>
</head>

<body class="bg-secondary-subtle">
    <header>
        {% include 'navbar.html'%}
    </header>
    <br>
    <main class="container">
        <div class="text-center">
            <h1 class="h1">Respuesta #{{ respuesta.id }}</h1>
            <h4 class="h4">Fecha: {{ respuesta.fecha_creacion|fecha_local_CDMX }} CDMX</h4>
        </div>
        <br>
        <div id="carouselExampleAutoplaying" class="carousel slide" data-bs-ride="carousel" data-bs-theme="dark">
            <div class="carousel-inner">
                {% for imagen in respuesta.imagenes %}
                <div class="carousel-item active">
                    <img src="data:image/{{ imagen.nombre|extension }};base64,{{ imagen.imagen|imagen_base64 }}"
                        class="d-block w-100" alt="{{ imagen.nombre }}">
                    <div class="carousel-caption d-none d-md-block">
                        <p>{{ imagen.nombre }}</p>
                    </div>
                </div>
                {% endfor %}
            </div>
            <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleAutoplaying"
                data-bs-slide="prev">
                <span class="carousel-control-prev-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Previous</span>
            </button>
            <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleAutoplaying"
                data-bs-slide="next">
                <span class="carousel-control-next-icon" aria-hidden="true"></span>
                <span class="visually-hidden">Next</span>
            </button>
        </div>
        <table class="table">
            
            <thead>
                {% if respuesta.aprobado %}
                <tr class="table-success text-center">
                    <th colspan="2">Aprobado</th>
                </tr>
                {% else %}
                <tr class="table-warning text-center">
                    <th colspan="2">En revision</th>
                </tr>
                {% endif %}
                <tr>
                    <th scope="col">Campo</th>
                    <th scope="col">Valor</th>
                </tr>
            </thead>
            <tbody>
                <tr>
                    <td scope="row">Correo de contacto</td>
                    <td>{{ respuesta.datos['correo_contacto'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Tipo de techo</td>
                    <td>{{ respuesta.datos['tipo_techo'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Vegetacion</td>
                    <td>{{ respuesta.datos['vegetacion'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Superficie en m2</td>
                    <td>{{ respuesta.datos['superficie'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Tipo de inmueble</td>
                    <td>{{ respuesta.datos['tipo_inmueble'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Numero de pisos del inmueble</td>
                    <td>{{ respuesta.datos['numero_pisos'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Techo verde en el ultimo piso</td>
                    <td>{{ respuesta.datos['ubicacion_ultimo_piso'] }}</td>
                </tr>
                {% if respuesta.datos['ubicacion_ultimo_piso'] == 'no' %}
                <tr>
                    <td scope="row">Piso del techo verde</td>
                    <td>{{ respuesta.datos['otro_piso'] }}</td>
                </tr>
                {% endif %}
                <tr>
                    <td scope="row">Solicito beneficio fiscal</td>
                    <td>{{ respuesta.datos['beneficio_fiscal'] }}</td>
                </tr>
                <tr>
                    <td scope="row">Instalacion</td>
                    <td>{{ respuesta.datos['instalacion'] }}</td>
                </tr>
                {% if respuesta.datos['instalacion'] == 'empresa' %}
                <tr>
                    <td scope="row">Empresa instaladora</td>
                    <td>{{ respuesta.datos['empresa_instaladora'] }}</td>
                </tr>
                {% endif %}
                <tr>
                    <td scope="row">Link de la ubicacion</td>
                    <td><a href="{{ respuesta.datos['link_ubicacion'] }}" target="_blank" rel="noopener noreferrer">{{ respuesta.datos['link_ubicacion'] }}</a></td>
                </tr>
            </tbody>
        </table>
        <br>
        <form id="registro" method="POST" action="/guardar_registro" enctype="multipart/form-data" class="row g-2">
            <!--SUPERFICIE DEL TECHO VERDE-->
            <div class="col-md-6">
                <label for="superficie" class="form-label">Superficie del techo en m2</label>
                <input id="superficie" name="superficie" type="number" value="1" min="1" max="10000" required
                    class="form-control"></input>
            </div>

            <!--TIPO DE INMUEBLE-->
            <div class="col-md-6">
                <label for="tipo_inmueble" class="form-label">Tipo de inmueble</label>
                <select id="tipo_inmueble" name="tipo_inmueble" required class="form-select">
                    <option value="casa-habitacion" default>Casa habitacion</option>
                    <option value="edificio-de-departamentos">Edificio de departamentos</option>
                    <option value="local-comercial">Local comercial</option>
                    <option value="oficinas privadas">Oficinas privadas</option>
                </select>
            </div>

            <!--¿SOLICITASTE EL BENEFICIO FISCAL?-->
            <div class="col-md-6">
                <label class="form-label">¿Solicitaste el beneficio fiscal del 10% en la reducción del impuesto
                    predial?</label>
                <div class="form-check">
                    <input id="beneficio_fiscal_si" name="beneficio_fiscal" type="radio" value="si" checked required
                        class="form-check-input"></input>
                    <label for="beneficio_fiscal_si" class="form-check-label">Si</label>
                </div>
                <div class="form-check">
                    <input id="beneficio_fiscal_no" name="beneficio_fiscal" type="radio" value="no"
                        class="form-check-input"></input>
                    <label for="beneficio_fiscal_no" class="form-check-label">No</label>
                </div>
            </div>

            <div class="col-md-6">
                <button id="enviar_formulario" type="submit" class="btn btn-primary">Actualizar</button>
            </div>
        </form>
    </main>
    <footer class="container">
        {% include 'footer.html'%}
    </footer>
    <script src="{{url_for('static', filename='scripts/axios.min.js')}}"></script>
    <script src="{{url_for('static', filename='scripts/actualizar_respuesta.js')}}"></script>
</body>

</html>